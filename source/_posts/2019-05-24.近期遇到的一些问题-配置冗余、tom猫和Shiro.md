---
title: 配置冗余、tom猫和Shiro的一些问题
date: 2019-05-24 22:46:10
tags:
	- 技术
categories:
	- 学习中遇到的问题
---
&emsp;&emsp;写在前头：这次的博客主要是记录我在学习spring集成shiro框架时产生的一些问题，这包括xml配置文件的问题、tomcat的问题、以及产生的一些玄学问题。
&emsp;&emsp;1.对冗余的0容忍：
&emsp;&emsp;在之前的springMVC-servlet.xml的配置文件我是这样配置的：
![之前的配置](http://kan.027cgb.com/622253/TIM%E6%88%AA%E5%9B%BE20190523103451.png)
&emsp;&emsp;其实应该只需要这样:
![现在的配置](http://kan.027cgb.com/622253/TIM%E6%88%AA%E5%9B%BE20190523104413.png)
&emsp;&emsp;即可解决springMVC的核心控制组件dispathcerServlet对控制器的控制选择和分发处理。因为<mvc:annotation-driven/>配置相当于已经注册了请求的监听器和映射器。所以要是再把这个映射器和监听器写入配置文件就会产生性能和配置文件不简洁的坏处。
&emsp;&emsp;2.tomcat的经典异常：
![tom猫经典异常](http://kan.027cgb.com/622253/TIM%E6%88%AA%E5%9B%BE20190523104956.png)
&emsp;&emsp;这个问题可追溯到我最开始学习框架的时候，仿佛只要一个路径不对、一点问题的错误tomcat就会告诉你部署错误部署错误，让你看日志看日志！这就好像在你学习的开始tomcat就警告过你了，程序员不好当，现在退出还来得及！哈哈。由于我每一次都是不理睬它的看日志警告，太注重于部署错误的表面意思，我就不停的配置项目本身，重写打war包，重写将war包发布到tomcat，而忘记了项目本身的问题。终于在这几天实在忍受不了这种模模糊糊的感觉而发现了原来在idea server窗口的左边就是Tomcat Localhost Log...即一个按钮可呈现出项目问题根源所在..而我却胡乱倒腾..方式很重要!
&emsp;&emsp;tomcat日志:
![本地日志信息](http://kan.027cgb.com/622253/TIM%E6%88%AA%E5%9B%BE20190523105915.png)
&emsp;&emsp;所以，有问题找日志，这就将模糊问题更加细化，从而追根溯源，得以快速解决。
&emsp;&emsp;3.已放弃的玄学问题：
&emsp;&emsp;在使用shiro做权限管理的时候，会存在将用户信息存入缓存的情况，而shiro使用的缓存框架是ehcache。而当我集成的时候却出现了这样的一个问题：
![encache异常](http://kan.027cgb.com/622253/TIM%E6%88%AA%E5%9B%BE20190523110519.png)
&emsp;&emsp;这个问题让我换了千千万万的ehcache jar依赖、换maven版本以及做其他依赖妥协..可是这个异常依旧稳如山...最后的解决方案是使用别人成品项目的配置，但是环境几乎和我自己搭建的没什么太大的区别，所以也是没有找到问题的根源所在。
&emsp;&emsp;问题的出现是好事情，因为这可以让你更加深刻的理解技术和理清思路，但找到问题的好的解决方案也才能高效率解决问题，要不然会大量巡查和解决问题的时间。
